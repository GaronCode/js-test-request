# js-test-request
Переписаная тестовая версия
## Задача: переработать код ниже обращения к api:

Задание            |  Решение
:-------------------------:|:-------------------------:
![Задача](https://raw.githubusercontent.com/GaronCode/js-test-request/main/0_task.png)  |  ![Задача](https://raw.githubusercontent.com/GaronCode/js-test-request/main/1_solution.png)



## Задача: указать ошибки в коде задания
1. Не по синтаксису созданые поля в 21/22 строках
   1. их вообще не обязательно указывать, они создаются в конструкторе
2. Прямое нахождение пароля в объекте не безопасно (всегда будет доступ к нему)
3. 29-я строка. Геттер
   1. Название совпадает с полем. Нужно либо переименовать поле, либо геттер
   2. Возвращается значение из прототипа класса, а не из экземпляра. Нужно использовать `this`
   3. Лучше создать сеттер ничего не возвращающий для предотвращения ошибок.
4. 37-я строка, класс `authenticate_user`
   1. класс не должен быть `static`, т.к. будут использоваться значения экземпляра класса
   2. Использутся `GET` запрос с данными через `url`. Если сервер требует именно его, то ничего не поделаешь
   3. Обращение к полям user и password идёт через прототип, а не экземпляр. Нужно использовать `this`
   4. В 49й строке используется константа, хотя дальше она изменяется. Меняем на `let`
   5. В условии на 46й строке не нужно писать '200' как текст, `status` всегда `Number`.
   6. Странное условие при получении данных на 46й строке. Лучше вернуть объект, в котором будут ключи `{succsess, response}`, где `succsess = true`, если `status == 200`
   7. Нету отправки сообщения xhr.send()
   8. Главная проблема: функция всегда вернёт `false`, т.к. `onload` запустится после получения ответа, а интерпритатор пойдёт дальше и выполнит `return`. Нужно либо:
      1. Поставить флаг `false` третьем параметром в `xhr.open()`, чтобы запрос шёл синхронно и использовать конструкцию `try/catch` для обработки ошибок
      2. Переписать запрос на промис и сделать `authenticate_user` `async`
      3. Передавать функции как параметры для `authenticate_user`, которые будут запущены при разных условиях
   9. Лучше всего разделить логику отправки сообщений и логику генерации запроса в разные классы/функции
5.  57я - используется перезапись функции `click`, вместо добавления новой с помощью `addEventListener`
6.  58,59я:
    1.  Нужно использовать `let` вместо `var`. Нам не нужны эти переменные в глобальной области видимости
    2.  В этих переменных должны храниться только значения `value`, а не целеком dom элементы
7. Тут всё зависит как будет устроена функция `authenticate_user`. Если синхронно: 
   1. Не понятно откуда взялся ключ `.error`. Его нету в объекте  `XMLHttpRequest`, если он возвращается